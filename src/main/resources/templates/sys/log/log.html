<!DOCTYPE html>
<html lang="zh-cn" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2"/>
    <title>系统日志</title>
    <link rel="icon" type="image/x-icon" th:href="@{/static/favicon.ico}">
    <link rel="stylesheet" th:href="@{/static/css/global-keep-younger.ui.css}">
    <link rel="stylesheet" th:href="@{/static/css/pop.css}">
    <link rel="stylesheet" th:href="@{/static/font-awesome-4.7.0/css/font-awesome.min.css}">
</head>
<body>
<div th:replace="model/model::header"></div>
<div th:replace="model/model::sidebar"></div>
<div class="ky-container">
    <div class="ky-container-header">
            <span class="ky-container-header-nav">
                <a class="ky-container-header-nav-back" th:href="@{/data}"><i class="fa fa-chevron-left"></i></a>
                <a th:href="@{/}">首页</a>
                <span> / </span>
                <a th:href="@{/data}">系统管理</a>
                <span> / </span>
                <a th:href="@{/data/book}">系统日志管理</a>
            </span>
    </div>
    <div class="ky-main">
        <div class="ky-main-search-box">
            <div class="ky-main-search-item"><input id="dataType" type="text" placeholder="数据类型"></div>
            <div class="ky-main-search-item"><input id="processType" type="text" placeholder="操作类型"></div>
            <div class="ky-main-search-item"><input id="startTime" type="text" placeholder="开始时间"></div>
            <div class="ky-main-search-item"><input id="endTime" type="text" placeholder="结束时间"></div>
        </div>
        <div class="ky-main-search-box">
            <div class="ky-main-search-item"><input id="userId" type="text" placeholder="用户"></div>
            <button id="sysLogSearch" type="button">查询</button>
        </div>
        <table class="ky-data-table" cellpadding="0" cellspacing="0">
            <tr>
                <th width="15%">序号</th>
                <th width="10%">操作者</th>
                <th width="12%">请求方法</th>
                <th width="12%">请求方法名称</th>
                <th width="10%">数据类型</th>
                <th width="8%">操作类型</th>
                <th width="8%">状态</th>
                <th width="15%">操作</th>
            </tr>
            <tr class="ky-data-tr-one">
                <td>4130954854400</td>
                <td>admin</td>
                <td>/v/sys/log</td>
                <td>系统日志查询</td>
                <td>日志</td>
                <td>查询</td>
                <td><span class="ky-icon-green">成功</span></td>
                <td>
                    <a class="ky-icon-green" href="#">详情</a>
                    <a class="ky-icon-red" href="#">删除</a>
                </td>
            </tr>
            <tr class="ky-data-tr-two">
                <td>4130954854400</td>
                <td>admin</td>
                <td>/v/sys/log</td>
                <td>系统日志查询</td>
                <td>日志</td>
                <td>查询</td>
                <td><span class="ky-icon-red">失败</span></td>
                <td>
                    <a class="ky-icon-green" href="#">详情</a>
                    <a class="ky-icon-red" href="#">删除</a>
                </td>
            </tr>
        </table>
    </div>
</div>
</body>
<script th:src="@{/static/js/jquery-2.0.3.js}"></script>
<script th:src="@{/static/js/pop.js}"></script>
<script th:src="@{/static/js/global-keep-younger.ui.js}"></script>
<script th:inline="javascript">
    $("#sysLogSearch").on("click",function () {
        var logParam = {
            user_id: 1,
            data_type: "",
            process_type: "",
            start_time: 0,
            end_time: 0,
            page: 1,
            limit: 20
        };
        $.ajax({
            url: "/v/log/sys",
            type: "post",
            data: JSON.stringify(logParam),
            success: function (data) {
                if(null == data){
                    pop("数据请求失败");
                } else if(data.code == 200){
                    pop("数据加载成功");
                } else {
                    pop(data.msg);
                }
            }
        });
    });

    /**
     * 数据加载
     * @param data
     */
    function loadData(data) {
        var table = $(".ky-data-table");
        //清除原有数据
        $(table).remove(".ky-data-tr-one");
        $(table).remove(".ky-data-tr-two");
    }
</script>
</html>